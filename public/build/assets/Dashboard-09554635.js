import{i as x,o as s,d as r,t as i,r as l,j as f,G as v,m as k,c as y,w,J as g,a as e,b,e as h,h as C,F as M,f as u}from"./app-1b79b513.js";import{_ as D}from"./Alert-916387da.js";import{_ as T}from"./AppLayout-6354d57d.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";const S={props:{date:{type:Date,required:!0}},setup(_){const a=new Date;return{daysSince:x(()=>7-Math.floor((a-new Date(_.date))/(1e3*60*60*24)))}}},$={key:0},j={key:1},L={key:2};function N(_,a,n,t,m,p){return s(),r("div",null,[t.daysSince==0?(s(),r("p",$,"Expiring tonight")):t.daysSince<=1?(s(),r("p",j,i(t.daysSince)+" day left",1)):(s(),r("p",L,i(t.daysSince)+" days left",1))])}const z=B(S,[["render",N]]),R=e("div",{class:"grid grid-flow-col auto-cols-auto place-content-between"},[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Dashboard "),e("a",{href:"/create",class:"btn btn-primary btn-xl"},"Create")],-1),V={class:"py-12"},G={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},P={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},U={class:"overflow-x-auto w-full"},q={class:"table w-full"},E=e("thead",null,[e("tr",null,[e("th"),e("th",null,"Name"),e("th",null,"Created (GMT)"),e("th",null,"Status"),e("th",null,"Link"),e("th",null,"Delete")])],-1),F={key:0},I=e("td",{colspan:"7"},[e("div",{class:"alert border-2 border-error bg-grey shadow-lg"},[e("div",{class:""},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current flex-shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",null,"Keep your CRMs alive forever - A monthly subscription is only $14.99 ")]),e("div",{class:"flex-none"},[e("a",{href:"/subscribe",class:"relative inline-flex items-center justify-start px-6 py-3 overflow-hidden font-medium transition-all bg-red-500 rounded-xl group"},[e("span",{class:"absolute top-0 right-0 inline-block w-4 h-4 transition-all duration-500 ease-in-out bg-red-700 rounded group-hover:-mr-4 group-hover:-mt-4"},[e("span",{class:"absolute top-0 right-0 w-5 h-5 rotate-45 translate-x-1/2 -translate-y-1/2 bg-white"})]),e("span",{class:"absolute bottom-0 left-0 w-full h-full transition-all duration-500 ease-in-out delay-200 -translate-x-full translate-y-full bg-red-600 rounded-2xl group-hover:mb-12 group-hover:translate-x-0"}),e("span",{class:"relative w-full text-left text-white transition-colors duration-200 ease-in-out group-hover:text-white"},"Upgrade")])])])],-1),A=[I],H={key:1},J=e("td",{colspan:"7"},[e("div",{class:"alert border-2 border-black shadow-lg mt-5 mb-5"},[e("div",null,[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"stroke-info flex-shrink-0 w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",null,[e("br"),u("Let's get started and create your first CRM. You can select from a number of different ways to create a CRM:"),e("br"),e("br"),e("span",{class:"grid grid-flow-col place-content-start mr-10"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current flex-shrink-0 h-6 w-6 mr-3",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),u(" IceburgCRM - Predefined standard crm modules"),e("br")]),e("span",{class:"grid grid-flow-col place-content-start mr-10"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current flex-shrink-0 h-6 w-6 mr-3",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),u("Upload your own schema ")]),e("span",{class:"grid grid-flow-col place-content-start mr-10"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current flex-shrink-0 h-6 w-6 mr-3",fill:"none",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),u(" Connect to an existing database")]),e("br")])]),e("div",{class:"flex-none"},[e("a",{class:"btn btn-primary mr-5",href:"/create"},"Create")])])],-1),K=[J],Y=e("td",null," Â  ",-1),O={class:"flex items-center space-x-3"},Q={class:"font-bold"},W=e("br",null,null,-1),X={key:0,class:"badge badge-ghost badge-sm"},Z={key:1,class:"ml-5 btn btn-error text-white btn-xs",href:"/subscribe"},ee={key:0},te=["href"],se={key:1},re=["onClick"],oe=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})],-1),le=[oe],ae=e("tfoot",null,[e("tr",null,[e("th"),e("th",null,"Name"),e("th",null,"Created (GMT)"),e("th",null,"Status"),e("th",null,"Link"),e("th",null,"Delete")])],-1),he={__name:"Dashboard",setup(_){const a=l(f().props.value.plan),n=l(f().props.value.crms);l(""),l([]);const t=v({success_alert:l(0),error_alert:l(0),alert_text:l("")}),m=function(){g.get("/data/crms").then(d=>{console.log("in here"),n.value=d.data})},p=function(d){g.post("/data/crm/delete/"+d,{id:d}).then(c=>{c.data&&(c.data.status==1?(window.scrollTo(0,top),t.alert_text="The CRM selected has been queued for deletion",t.success_alert=!0,setTimeout(()=>{t.error_alert=null,t.alert_text="",window.scrollTo(0,"top"),t.success_alert=null,t.preview=!1},5e3)):(t.error_alert=1,t.alert_text=c.data.message,window.scrollTo(0,top),setTimeout(()=>{t.error_alert=null,t.alert_text=""},5e3)))}).catch(c=>{let o;t.error_alert=1,clearTimeout(o),o=setTimeout(()=>{t.error_alert=0,t.alert_text="error"},5e3)})};return k(()=>{setInterval(function(){m()},1e4)}),(d,c)=>(s(),y(T,{title:"Dashboard"},{header:w(()=>[R]),default:w(()=>[e("div",V,[e("div",G,[e("div",P,[b(D,{message:t.alert_text,is_successful:t.success_alert,is_error:t.error_alert},null,8,["message","is_successful","is_error"]),e("div",U,[e("table",q,[E,e("tbody",null,[n.value.length<1&&a.value==!1?(s(),r("tr",F,A)):h("",!0),n.value.length<1?(s(),r("tr",H,K)):h("",!0),(s(!0),r(M,null,C(n.value,o=>(s(),r("tr",null,[Y,e("td",null,[e("div",O,[e("div",null,[e("div",Q,i(o.label),1)])])]),e("td",null,[u(i(o.created_at)+" ",1),W,a.value==!1?(s(),r("span",X,[b(z,{date:o.created_at},null,8,["date"])])):h("",!0),a.value==!1?(s(),r("a",Z,"Upgrade")):h("",!0)]),e("td",null,i(o.team_id)+" "+i(o.status.name),1),o.status.id>1?(s(),r("td",ee,[e("a",{class:"btn btn-ghost btn-sm font-bold underline",href:`https://${o.name.replace("user_","")}.iceburgcrm.com`,target:"blank"},"Visit",8,te)])):(s(),r("td",se," Processing ")),e("td",null,[e("a",{onClick:ne=>p(o.id),class:"ml-30 text-error hover:text-black btn-xs underline"},le,8,re)])]))),256))]),ae])])])])])]),_:1}))}};export{he as default};
